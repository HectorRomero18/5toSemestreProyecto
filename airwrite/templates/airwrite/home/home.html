{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <title>AIRWRITE SOFT - Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fuentes y estilos -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@800&family=Roboto:wght@700&family=Manrope:wght@400;500;600;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Estilos locales -->
  <link rel="stylesheet" href="{% static 'airwrite/css/home.css' %}">
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">AIRWRITE SOFT</div>
      </div>

      <nav class="navigation">
        <a href="{% url 'home' %}" class="nav-item" data-page="home">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span class="nav-label">Inicio</span>
        </a>

        <a href="{% url 'tienda' %}" class="nav-item active" data-page="tienda">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
          </svg>
          <span class="nav-label">Tienda</span>
        </a>

        <a href="{% url 'favorito' %}" class="nav-item" data-page="favoritos">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span class="nav-label">Favoritos</span>
        </a>

        {% load socialaccount %}
        <a href="{% url 'logout' %}" class="nav-item logout-link" data-page="logout">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span class="nav-label">Cerrar Sesión</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <img src="{% static 'airwrite/img/output-onlinegiftools (5).gif' %}" alt="Sidebar Image" class="sidebar-image">
      </div>
    </aside>

    <div class="divider"></div>

    <!-- Main Content -->
    <main class="main-content">
      <header class="main-header">
        <h2 class="welcome-title">Hola {{ user.first_name }} {{ user.last_name }}, bienvenido de nuevo!</h2>
      </header>

      <!-- My Courses Section -->
      <section class="my-courses-section">
        <div class="section-header">
          <h2 class="section-title">Mis Cursos</h2>
          <div class="search-box">
            <form method="get">
              <input type="text" name="q" placeholder="Buscar..." value="{{ request.GET.q }}" class="search-input" />
            </form>
          </div>
        </div>

        <div class="courses-grid">
          {% for module in modules %}
            <a href="{% if module.name == 'Abecedario' %}
                        {% url 'abecedario' %}
                      {% elif module.name == 'Numeros' %}
                        {% url 'numeros' %}
                      {% elif module.name == 'Silabas' %}
                        {% url 'silaba' %}
                      {% else %}
                        {% url 'trazos' %}
                      {% endif %}" class="course-link">
                {% comment %} <p>{{ module.name }}</p> {% endcomment %}

              <div class="course-card">
                <img src="{% if forloop.counter == 1 %}
                            https://c.animaapp.com/mh6mj11rEipEzl/img/group-1.png
                          {% elif forloop.counter == 2 %}
                            https://c.animaapp.com/mh6mj11rEipEzl/img/group-2.png
                          {% elif forloop.counter == 3 %}
                            https://c.animaapp.com/mh6mj11rEipEzl/img/italian.png
                          {% else %}
                            https://c.animaapp.com/mh6mj11rEipEzl/img/group-4.png
                          {% endif %}"
                    alt="{{ module.name }}" class="course-bg" />

                <div class="course-content">
                  <h3 class="course-title">{{ module.name }}</h3>
                  <p class="course-lessons">{{ module.description }}</p>

                  <img src="{{ module.imagen_url }}" alt="numeros_home" class="course-decoration" />
                </div>
              </div>
            </a>
          {% empty %}
            <p>No hay cursos disponibles.</p>
          {% endfor %}
        </div>

      </section>

      <!-- Video Section -->
      <section class="video-section">
        <div class="video-container">
          <video class="main-video" controls autoplay muted loop>
            <source src="{% static 'airwrite/img/VideoOficialDemo.mp4' %}" type="video/mp4">
            Tu navegador no soporta el elemento video.
          </video>
        </div>
      </section>

      <!-- Course Planning Section -->
      <section class="course-planning-section">
        <div class="planning-grid">
          {% for curso in cursos %}
          <div class="planning-card">
            <div class="planning-icon">
              <img src="https://c.animaapp.com/mh6mj11rEipEzl/img/edit-2.svg" alt="Edit" />
            </div>
            <div class="planning-content">
              <div class="planning-title">{{ curso.nombre }}</div>
              <div class="planning-subtitle">Última vez abierto: {{ curso.fecha|date:"d F Y" }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
    </main>

    <div class="divider"></div>

    <!-- Right Sidebar -->
    <aside class="right-sidebar">
      <section class="statistics-section">
        <h2 class="section-title">Estadísticas</h2>
        <div class="statistics-grid">
          <div class="stat-card">
            <div class="stat-label">Cursos<br />Completados</div>
            <div class="stat-value">{{ module|length }}</div>
            <div class="stat-bar"></div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Total de Puntos<br />de Experiencia</div>
            <div class="stat-value">{{ user_xp }}</div>
            <div class="stat-bar"></div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Cursos en<br />Progreso</div>
            <div class="stat-value">{{ modules|length}}</div>
            <div class="stat-bar"></div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Niveles<br />Finalizados</div>
            <div class="stat-value">{{ module|length }}</div>
            <div class="stat-bar"></div>
          </div>
        </div>
      </section>

      <!-- Carrusel de Beneficios -->
      <section class="carousel-section">
        <h2 class="carousel-title">Beneficios del Sistema</h2>
        <div class="carousel-container">
          <div class="carousel-track">
            <div class="carousel-card">
              <div class="carousel-image"></div>
              <div class="carousel-content">
                <h3>Desarrollo motriz</h3>
                <p>Mejora tus movimientos y coordinación al trazar letras y números con tu marcador mágico.</p>
              </div>
            </div>

            <div class="carousel-card">
              <div class="carousel-image"></div>
              <div class="carousel-content">
                <h3>Creatividad y colores</h3>
                <p>Explora tu imaginación cambiando colores y tamaños del marcador en cada trazo divertido.</p>
              </div>
            </div>
            
            <div class="carousel-card">
              <div class="carousel-image"></div>
              <div class="carousel-content">
                <h3>Aprendizaje divertido</h3>
                <p>Juega y aprende a escribir mientras desbloqueas letras y ganas puntos en cada nivel.</p>
              </div>
            </div>
            
            <div class="carousel-card">
              <div class="carousel-image"></div>
              <div class="carousel-content">
                <h3>Memoria y reconocimiento</h3>
                <p>Practica cada forma muchas veces y verás cómo recuerdas las letras y números fácilmente.</p>
              </div>
            </div>
            
            <div class="carousel-card">
              <div class="carousel-image"></div>
              <div class="carousel-content">
                <h3>Concentración y atención</h3>
                <p>Aprende a concentrarte siguiendo los contornos y completa cada trazo sin salirte del camino.</p>
              </div>
            </div>
          </div>
          
          <!-- Botones del carrusel -->
          <div class="carousel-buttons">
            <button class="carousel-btn prev-btn" aria-label="Anterior">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
              </svg>
            </button>
            <button class="carousel-btn next-btn" aria-label="Siguiente">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
              </svg>
            </button>
          </div>

          <!-- Indicadores -->
          <div class="carousel-dots">
            <button class="carousel-dot active" data-slide="0"></button>
            <button class="carousel-dot" data-slide="1"></button>
            <button class="carousel-dot" data-slide="2"></button>
            <button class="carousel-dot" data-slide="3"></button>
            <button class="carousel-dot" data-slide="4"></button>
          </div>
        </div>
      </section>
    </aside>
  </div>

  <!-- Scripts -->
  <script src="{% static 'airwrite/js/home.js' %}"></script>
</body>

</html>